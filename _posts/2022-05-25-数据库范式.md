---
layout: post
title: "数据库范式"
tag: db
category: note
---

## 第三范式

关系$R$属于**第三范式**，如果：

- 只要$A_1A_2\cdots A_n\rightarrow B_1B_2\cdots B_m$ 是非平凡FD，那么或者$\{A_1, A_2, \cdots, A_n\}$是超键，或者每个属于$\{B_1, B_2, \cdots B_m\}$但不属于$A$的属性都是某个键的成员。

下列算法将关系$R$分解为一系列满足条件的关系：

1. 分析得到的关系属于3NF
2. 分解包含无损连接
3. 分解具有依赖保持性质

**输入**：关系$R$及其上的函数依赖集$F$

**输出**：关系$R$分解出的关系集合，每个关系满足上面三条性质。

**方法**：

1. 找出$F$的一个最小基本集$G$
2. 对于$G$中每个FD $X\rightarrow A$，将$XA$作为分解出的某个关系的模式
3. 若第二步中分解出的关系模式不包含$R$的超键，则增加一个关系，其模式为$R$的任意一个键

## Boyce-Codd范式

关系$R$属于第四范式，当且仅当：

- 若$A_1A_2\cdots A_n\rightarrow B_1B_2\cdots B_m$ 是非平凡FD，那么$\{A_1A_2\cdots A_n\}$是超键

下列算法将关系$R$分解为一系列满足条件的关系，每个关系均符合BCNF：

**输入**：关系$R$及其上的函数依赖集$S_0$

**输出**：关系$R$分解出的关系集合，每个关系均属于BCNF

**方法**：

1. 检查$R$是否属于BCNF，如果是，返回$\{R\}$作为结果
2. 如果存在BCNF范例$X\rightarrow Y$，计算$X^+$。选择$R_1=X^+$作为一个关系模式，$R_2$包含属性$X$以及不在$X^+$的属性
3. 计算$R_1$和$R_2$的FD集，分别记为$S_1$, $S_2$
4. 递归地分解$R_1$, $R_2$，返回得到的分解结果集合