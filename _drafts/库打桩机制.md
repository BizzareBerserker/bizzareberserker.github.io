---
layout: post
title: "库打桩机制"
tag: linux
category: essay
---

Linux链接器支持一种称为**库打桩**(library interpositioning)的技术，它允许你截获对共享库函数的调用，取而代之执行你自己的代码。其基本思想为：对一个需要打桩的目标函数，创建一个包装函数，它的声明与目标函数完全一样，通过打桩机制，你可以欺骗系统调用包装函数而不是目标函数。通常包装函数会执行其自己的逻辑（如计数、验证其输入值），然后再调用目标函数，最终把目标函数的返回值返回给调用者。

### 编译时打桩

### 链接时打桩

### 运行时打桩

