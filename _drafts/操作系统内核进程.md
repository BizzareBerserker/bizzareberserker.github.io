---
layout: post
title: "操作系统内核/进程"
tag: os
category: essay
---

![Operating System and User Processes](/assets/os_6.png)

**分离的内核**：操作系统内核是一个所有进程外部执行的实体（进程概念不适用于内核）。当当前运行进程产生一个中断或一个系统调用，则保存该进程的上下文，并将控制权转交给内核，之后再回复被中断进程的上下文，继续调度或分派另一个进程。操作系统保持有一个控制调用的内存区域和系统栈。

**在用户进程内的内核例程**：操作系统例程在所有的用户进程的进程映象中（共享）。当进程产生一个中断或系统调用时，保存模式上下文并切换模式，再切换到一个操作系统例程，但此时程序依然在当前用户进程中执行，无需切换进程。操作系统管理一个独立的内核栈，操作系统代码和数据位于共享地址空间中被所有用户进程共享，并且需要在内核模式中运行。

**基于进程的内核**：操作系统例程作为一组独立的系统进程来实现。当产生系统调用或中断时操作系统进行进程切换并运行对应的操作系统进程。操作系统保持有一个内核栈，操作系统代码和数据保存在对应的OS进程的地址空间中。

